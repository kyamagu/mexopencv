<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <link rel="stylesheet" href="helpwin.css">
      <title>MATLAB File Help: cv.calcOpticalFlowFarneback</title>
   </head>
   <body>
      <!--Single-page help-->
      <table border="0" cellspacing="0" width="100%">
         <tr class="subheader">
            <td class="headertitle">MATLAB File Help: cv.calcOpticalFlowFarneback</td>
            <td class="subheader-left"></td>
            <td class="subheader-right"><a href="index.html">Index</a></td>
         </tr>
      </table>
      <div class="title">cv.calcOpticalFlowFarneback</div>
      <div class="helpcontent"><p>Computes a dense optical flow using the Gunnar Farneback's algorithm</p>

<pre><code>flow = <a href="calcOpticalFlowFarneback.html">cv.calcOpticalFlowFarneback</a>(prevImg, nextImg)
flow = <a href="calcOpticalFlowFarneback.html">cv.calcOpticalFlowFarneback</a>(prevImg, nextImg, 'OptionName',optionValue, ...)
</code></pre>

<h2> Input</h2>

<ul>
<li><strong>prevImg</strong> First 8-bit single-channel input image.</li>
<li><strong>nextImg</strong> Second input image of the same size and the same type as
<code>prevImg</code>.</li>
</ul>

<h2> Output</h2>

<ul>
<li><strong>flow</strong> Computed flow image that has the same size as <code>prevImg</code> and
<code>single</code> type (2-channels). Flow for <code>(x,y)</code> is stored in the third
dimension.</li>
</ul>

<h2> Options</h2>

<ul>
<li><strong>InitialFlow</strong> Initial flow approximation. Not set by default.</li>
<li><strong>PyrScale</strong> Parameter specifying the image scale (<code>&lt;1</code>) to build pyramids
for each image. <code>PyrScale=0.5</code> means a classical pyramid, where each
next layer is twice smaller than the previous one. default 0.5.</li>
<li><strong>Levels</strong> Number of pyramid layers including the initial image.
<code>Levels=1</code> means that no extra layers are created and only the
original images are used. default 5.</li>
<li><strong>WinSize</strong> Averaging window size. Larger values increase the algorithm
robustness to image noise and give more chances for fast motion
detection, but yield more blurred motion field. default 13.</li>
<li><strong>Iterations</strong> Number of iterations the algorithm does at each pyramid
level. default 10.</li>
<li><strong>PolyN</strong> Size of the pixel neighborhood used to find polynomial expansion
in each pixel. Larger values mean that the image will be approximated
with smoother surfaces, yielding more robust algorithm and more
blurred motion field. Typically, <code>PolyN</code> is 5 or 7. default 5.</li>
<li><strong>PolySigma</strong> Standard deviation of the Gaussian that is used to smooth
derivatives used as a basis for the polynomial expansion. For
<code>PolyN=5</code>, you can set <code>PolySigma = 1.1</code>. For <code>PolyN=7</code>, a good value
would be <code>PolySigma = 1.5</code>. default 1.1.</li>
<li><strong>Gaussian</strong> Use the Gaussian <code>WinSize x WinSize</code> filter instead of a box
filter of the same size for optical flow estimation. Usually, this
option gives z more accurate flow than with a box filter, at the cost
of lower speed. Normally, <code>WinSize</code> for a Gaussian window should be
set to a larger value to achieve the same level of robustness.
default false.</li>
</ul>

<p>The function finds an optical flow for each <code>prevImg</code> pixel using the
[Farneback2003] alorithm so that:</p>

<pre><code>prevImg(y,x) ~ next(y + flow(y,x,2), x + flow(y,x,1))
</code></pre>

<h2> References</h2>

<p>[Farneback2003]:</p>

<blockquote>
<p>Gunnar Farneback. &quot;Two-frame motion estimation based on polynomial
expansion&quot;. In Image Analysis, pages 363-370. Springer, 2003.</p>
</blockquote>
</div><!--after help --><!--seeAlso--><div class="footerlinktitle">See also</div><div class="footerlink"> <a href="calcOpticalFlowPyrLK.html">cv.calcOpticalFlowPyrLK</a>, opticalFlowLK, opticalFlowHS,
   vision.OpticalFlow</div>
   </body>
</html>